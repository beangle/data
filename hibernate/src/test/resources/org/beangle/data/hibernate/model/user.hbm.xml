<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="org.beangle.data.hibernate.model" default-access="org.beangle.data.hibernate.PropertyAccessor">
    
    <class name="org.beangle.data.hibernate.model.User" >
        <id name="id" unsaved-value="0" type="long" >
          <generator class="native"/>
        </id>
        <component name="name" class="Name">
          <property name="first" length="50"  column="first_name" not-null="true"/>
          <property name="last" length="50" not-null="true"/>
        </component>
        <set name="roleSet" table="users_role_set">
          <key column="user_id"/>
          <many-to-many entity-name="org.beangle.data.hibernate.model.Role" column="role_id"/>
        </set>
        <list name="roleList" collection-type="seq" table="users_roles_list">
          <key column="user_id"/>
          <list-index column="idx"/>
          <many-to-many entity-name="org.beangle.data.hibernate.model.Role" column="role_id"/>
        </list>
        <property name="age" type="int?"/>
        <map name="properties" cascade="all" collection-type="map" table="users_props">
           <key column="user_id"/>
           <map-key column="name" type="string"/>
           <element column="value" type="string"/>
        </map>
        <component name="member" class="Member">
          <parent name="user"/>
          <many-to-one name="granter" entity-name="org.beangle.data.hibernate.model.User" />
          <property name="admin" not-null="true"/>
          <set name="roles" table="users_roles" collection-type="set">
            <key column="user_id"/>
            <many-to-many entity-name="org.beangle.data.hibernate.model.Role" column="role_id"/>
          </set>
        </component>
        <property name="occupy" type="weekstate"/>
        <property name="createdOn"/>
        <map name="skills" cascade="all" collection-type="map">
           <key column="user_id"/>
           <map-key-many-to-many class="org.beangle.data.hibernate.model.SkillType" column="skill_type_id"/>
           <many-to-many class="org.beangle.data.hibernate.model.Skill" column="skill_id"/>
        </map>
    </class>

    <class name="org.beangle.data.hibernate.model.Role" >
        <id name="id" unsaved-value="0" type="integer">
          <generator class="assigned"/>
        </id>
        <many-to-one name="parent" column="parent_id" entity-name="org.beangle.data.hibernate.model.Role" />
        <property name="name" length="50" unique="true"/>
    </class>

    <class name="org.beangle.data.hibernate.model.Skill" table="skill_list" >
        <id name="id" unsaved-value="0" type="integer">
          <generator class="assigned"/>
        </id>
        <many-to-one name="skillType"/>
        <property name="name"/>
    </class>

    <class name="org.beangle.data.hibernate.model.SkillType" >
        <id name="id" unsaved-value="0" type="integer">
          <generator class="assigned"/>
        </id>
        <property name="name"/>
    </class>

    <class name="org.beangle.data.hibernate.model.ExtendRole" entity-name="org.beangle.data.hibernate.model.Role">
        <id name="id" unsaved-value="0" type="integer">
          <generator class="assigned"/>
        </id>
        <!--
            这一行可以省略，这些属性如果不进行修改，只是继承，则可以不用重复
            <property name="name" length="50" unique="true"/>
         -->
        <property name="enName" length="50" unique="true"/>
    </class>
</hibernate-mapping>
